Hello,<br> 
<br>
Below is an audit transaction report which is comparing transaction from our payment gateway provider(bpoint) with transactions in our ledger database.<br>
<br>
The report below can be used to find discrepancies in transactions.<br>
<br>
<b>Report Date: {{ settlement_date }}</b>
<br>
<br>
All three totals should match,  if the totals do not match then there is a discrepancy.
<table cellpadding=1 border=1>
<tr>
<th width='200'  align='center'>
BPOINT
</th>
<th width='200'  align='center'>
LEDGER PAYMENTS
</th>
<th width='200'  align='center'>
ORACLE RECEIPTS
</th>

</tr>
<tr>
<td align='center'>
	$ {{ bpoint_total_amount }}
</td>
<td  align='center'>
      $ {{ ledger_payment_amount_total }}
</td>
<td  align='center'>
       $ {{ oracle_receipts_total }}
</td>
</tr>
</table>

<br>
<u>Transaction history with rolling totals</u>
<br>
<br>
Compares Bpoint transactions with ledger payment transaction data.  <br>
&nbsp;&nbsp;* Blue background around invoice number indicates a possible duplicate payment.<br>
&nbsp;&nbsp;* A red box around the differnce amount indicates the possible location of a discrepancy.<br>
<br>
<table cellpadding=1> 
	<tr><th>Txn Number</th><th>Invoice No</th><th>Bpoint Settlement Date</th><th>Ledger Settlement Date</th><th>Processed Date Time</th><th>Action</th><th>Amount</th><th>Bpoint Audit Amount</th><th>Ledger Audit Amount</th><th>Diffrence</th></tr>	
  {% for r in rows %}
  <tr><td>{{ r.txn_number }}</td><td {% if r.is_dupe  %}bgcolor='#b2e6ff' {% endif %}>{{ r.crn1 }}</td><td>{{ r.settlement_date }}</td><td>{{ r.ledger_payment_settlement_date }}</td><td>{{ r.processed_date_time }}</td><td>{{ r.action }}</td><td>${{ r.amount }}</td><td>${{ r.bpoint_amount }}</td><td>${{ r.ledger_payment_amount }}</td><td {% if r.bp_lpb_diff > 0 %}bgcolor='red'{% endif %} >{{ r.bp_lpb_diff }}</tr>
  {% endfor %}
</table>
<br>
<u>Ledger payment transactions that are missing in bpoint</u>
<br>
<table cellpadding=1>
<tr><th>Invoice No</th><th>Ledger Settlement Date</th><th>Created</th><th>Action</th><th>Amount</th></tr>
{% for r in missing_records %}
    <tr><td>{{ r.crn1 }}</td><td>{{ r.settlement_date }}</td><td>{{ r.created }}</td><td>{{ r.action }}</td><td>${{ r.amount }}</td></tr>
{% endfor %}
</table>
<br>
<u>Bpoint transactions that are missing in ledger</u>
<br>
<table cellpadding=1>
	<tr><th>Invoice No</th><th>Ledger Settlement Date</th><th>Created</th><th>Action</th><th>Amount</th></tr>
	{% for r in missing_records_in_ledger %}
	    <tr><td>{{ r.crn1 }}</td><td>{{ r.settlement_date }}</td><td>{{ r.created }}</td><td>{{ r.action }}</td><td>${{ r.amount }}</td></tr>
    {% endfor %}
</table>
<br>
<br><br>

Kind Regards<br>
Auto Generated<br>
